"use strict";(self.webpackChunkwebsite_2=self.webpackChunkwebsite_2||[]).push([[476],{3671:(e,s,n)=>{n.d(s,{A:()=>l});const l=n.p+"assets/images/update_task-82efefe0f66f9175fee25daacd09bd88.png"},4182:(e,s,n)=>{n.d(s,{A:()=>l});const l=n.p+"assets/images/create_task-4f734d29249cdf8788c9ba5435f7ffa6.png"},4780:(e,s,n)=>{n.d(s,{A:()=>l});const l=n.p+"assets/images/cancel_task-995e0ce29659bc8258c078862a6498f0.png"},6308:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"documents/task_lifecycle","title":"\u4efb\u52d9\u751f\u547d\u9031\u671f\uff08Task Lifecycle\uff09","description":"Skalds \u7cfb\u7d71\u4e2d\u7684\u4efb\u52d9\u7ba1\u7406\u6db5\u84cb\u300c\u5efa\u7acb\u300d\u3001\u300c\u66f4\u65b0\u300d\u8207\u300c\u53d6\u6d88\u300d\u4e09\u5927\u6838\u5fc3\u6d41\u7a0b\u3002\u6bcf\u500b\u6d41\u7a0b\u7686\u900f\u904e\u4e8b\u4ef6\u9a45\u52d5\u6a5f\u5236\uff0c\u7d50\u5408 Redis\u3001Database \u8207 Event Queue\uff0c\u78ba\u4fdd\u4efb\u52d9\u72c0\u614b\u7684\u5373\u6642\u540c\u6b65\u8207\u9ad8\u6548\u8abf\u5ea6\u3002\u4ee5\u4e0b\u5206\u5225\u8aaa\u660e\u5404\u6d41\u7a0b\u7d30\u7bc0\u8207\u8a2d\u8a08\u7406\u5ff5\u3002","source":"@site/docs/documents/task_lifecycle.md","sourceDirName":"documents","slug":"/documents/task_lifecycle","permalink":"/Skalds/docs/documents/task_lifecycle","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"\u4efb\u52d9\u751f\u547d\u9031\u671f"},"sidebar":"documentsSidebar","previous":{"title":"\u6587\u4ef6","permalink":"/Skalds/docs/documents/all"},"next":{"title":"\u4efb\u52d9\u5de5\u4f5c\u8005\uff08TaskWorker\uff09","permalink":"/Skalds/docs/documents/task_worker"}}');var i=n(5813),r=n(9863);const t={sidebar_position:1,sidebar_label:"\u4efb\u52d9\u751f\u547d\u9031\u671f"},c="\u4efb\u52d9\u751f\u547d\u9031\u671f\uff08Task Lifecycle\uff09",d={},a=[{value:"\u5efa\u7acb\u4efb\u52d9\u6d41\u7a0b",id:"\u5efa\u7acb\u4efb\u52d9\u6d41\u7a0b",level:2},{value:"\u66f4\u65b0\u4efb\u52d9\u6d41\u7a0b",id:"\u66f4\u65b0\u4efb\u52d9\u6d41\u7a0b",level:2},{value:"\u53d6\u6d88\u4efb\u52d9\u6d41\u7a0b",id:"\u53d6\u6d88\u4efb\u52d9\u6d41\u7a0b",level:2}];function o(e){const s={blockquote:"blockquote",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"\u4efb\u52d9\u751f\u547d\u9031\u671ftask-lifecycle",children:"\u4efb\u52d9\u751f\u547d\u9031\u671f\uff08Task Lifecycle\uff09"})}),"\n",(0,i.jsx)(s.p,{children:"Skalds \u7cfb\u7d71\u4e2d\u7684\u4efb\u52d9\u7ba1\u7406\u6db5\u84cb\u300c\u5efa\u7acb\u300d\u3001\u300c\u66f4\u65b0\u300d\u8207\u300c\u53d6\u6d88\u300d\u4e09\u5927\u6838\u5fc3\u6d41\u7a0b\u3002\u6bcf\u500b\u6d41\u7a0b\u7686\u900f\u904e\u4e8b\u4ef6\u9a45\u52d5\u6a5f\u5236\uff0c\u7d50\u5408 Redis\u3001Database \u8207 Event Queue\uff0c\u78ba\u4fdd\u4efb\u52d9\u72c0\u614b\u7684\u5373\u6642\u540c\u6b65\u8207\u9ad8\u6548\u8abf\u5ea6\u3002\u4ee5\u4e0b\u5206\u5225\u8aaa\u660e\u5404\u6d41\u7a0b\u7d30\u7bc0\u8207\u8a2d\u8a08\u7406\u5ff5\u3002"}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"\u5efa\u7acb\u4efb\u52d9\u6d41\u7a0b",children:"\u5efa\u7acb\u4efb\u52d9\u6d41\u7a0b"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Skald \u555f\u52d5\u6642\uff0c\u5148\u5411 Redis \u767b\u8a18\u81ea\u8eab ID \u8207\u5fc3\u8df3\u8a0a\u865f\u3002"}),"\n",(0,i.jsx)(s.li,{children:"System Controller \u6301\u7e8c\u8207 Redis \u540c\u6b65\u76ee\u524d\u53ef\u7528\u7684 Skald ID\u3002"}),"\n",(0,i.jsx)(s.li,{children:"\u63a5\u6536\u5916\u90e8\u65b0\u589e\u4efb\u52d9\u8acb\u6c42\uff08\u5982 API \u547c\u53eb\uff09\u3002"}),"\n",(0,i.jsx)(s.li,{children:"\u7522\u751f\u4efb\u52d9 ID\uff0c\u4e26\u5c07\u4efb\u52d9\u7d30\u7bc0\u5b58\u5165\u8cc7\u6599\u5eab\uff08Database\uff09\u3002"}),"\n",(0,i.jsx)(s.li,{children:"\u4ee5\u4efb\u52d9 ID \u8207 Skald ID \u5efa\u7acb\u300c\u65b0\u589e\u4efb\u52d9\u4e8b\u4ef6\u300d\u8a0a\u606f\uff0c\u900f\u904e EventBus \u50b3\u905e\u7d66\u6307\u5b9a Skald\u3002"}),"\n",(0,i.jsx)(s.li,{children:"Skald \u63a5\u6536\u8207\u81ea\u8eab ID \u76f8\u7b26\u7684\u4e8b\u4ef6\u3002"}),"\n",(0,i.jsx)(s.li,{children:"Skald \u4f9d\u64da\u4efb\u52d9 ID \u5f9e\u8cc7\u6599\u5eab\u53d6\u5f97\u4efb\u52d9\u7d30\u7bc0\u3002"}),"\n",(0,i.jsx)(s.li,{children:"\u6839\u64da\u4efb\u52d9\u7d30\u7bc0\u5efa\u7acb TaskWorker \u5be6\u9ad4\u3002"}),"\n",(0,i.jsx)(s.li,{children:"TaskWorker \u5be6\u9ad4\u5efa\u7acb\u5f8c\uff0c\u5411 Redis \u767b\u8a18\u4efb\u52d9\u72c0\u614b\u3001\u8cc7\u8a0a\u8207\u5fc3\u8df3\u3002"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"\u5efa\u7acb\u4efb\u52d9\u6d41\u7a0b\u5716",src:n(4182).A+"",width:"1437",height:"695"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"\u66f4\u65b0\u4efb\u52d9\u6d41\u7a0b",children:"\u66f4\u65b0\u4efb\u52d9\u6d41\u7a0b"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"\u63a5\u6536\u5916\u90e8\u66f4\u65b0\u4efb\u52d9\u8acb\u6c42\u3002"}),"\n",(0,i.jsx)(s.li,{children:"\u5c07\u6307\u5b9a\u4efb\u52d9\u7d30\u7bc0\u66f4\u65b0\u65bc\u8cc7\u6599\u5eab\u4e2d\u3002"}),"\n",(0,i.jsx)(s.li,{children:"\u4ee5\u4efb\u52d9 ID \u8207 Skald ID \u5efa\u7acb\u300c\u66f4\u65b0\u4efb\u52d9\u4e8b\u4ef6\u300d\u8a0a\u606f\uff0c\u900f\u904e EventQueue \u50b3\u905e\u7d66\u6307\u5b9a Skald\u3002"}),"\n",(0,i.jsx)(s.li,{children:"Skald \u63a5\u6536\u8207\u81ea\u8eab ID \u76f8\u7b26\u7684\u4e8b\u4ef6\u3002"}),"\n",(0,i.jsx)(s.li,{children:"Skald \u4f9d\u64da\u4efb\u52d9 ID \u5f9e\u8cc7\u6599\u5eab\u53d6\u5f97\u6700\u65b0\u4efb\u52d9\u7d30\u7bc0\u3002"}),"\n",(0,i.jsx)(s.li,{children:"Skald \u5efa\u7acb TaskWorker \u66f4\u65b0\u4e8b\u4ef6\uff0c\u4e26\u900f\u904e EventQueue \u50b3\u905e\u7d66\u5c0d\u61c9 TaskWorker\u3002"}),"\n",(0,i.jsx)(s.li,{children:"TaskWorker \u63a5\u6536\u8207\u81ea\u8eab\u4efb\u52d9 ID \u76f8\u7b26\u7684\u4e8b\u4ef6\uff0c\u4e26\u5373\u6642\u8abf\u6574\u5167\u90e8\u904b\u4f5c\u53c3\u6578\u3002"}),"\n"]}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"\u8a3b\uff1a\u70ba\u4fdd\u6301\u55ae\u4e00\u5165\u53e3\uff08EntryPoint\uff09\uff0c\u6240\u6709\u4efb\u52d9\u4e8b\u4ef6\u7686\u7531 Skald \u7d71\u4e00\u8655\u7406\uff0c\u518d\u8f49\u767c\u7d66\u5167\u90e8 Worker\uff0c\u907f\u514d\u76f4\u63a5\u5c0d Worker \u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"\u66f4\u65b0\u4efb\u52d9\u6d41\u7a0b\u5716",src:n(3671).A+"",width:"1275",height:"783"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"\u53d6\u6d88\u4efb\u52d9\u6d41\u7a0b",children:"\u53d6\u6d88\u4efb\u52d9\u6d41\u7a0b"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"\u63a5\u6536\u5916\u90e8\u53d6\u6d88\u4efb\u52d9\u4e8b\u4ef6\u3002"}),"\n",(0,i.jsx)(s.li,{children:"\u522a\u9664\u8cc7\u6599\u5eab\u4e2d\u7684\u4efb\u52d9\u8cc7\u6599\uff0c\u6216\u5c07\u4efb\u52d9\u72c0\u614b\u6a19\u8a18\u70ba\u5df2\u53d6\u6d88\u3002"}),"\n",(0,i.jsx)(s.li,{children:"\u4ee5\u4efb\u52d9 ID \u5efa\u7acb\u300c\u53d6\u6d88\u4efb\u52d9\u4e8b\u4ef6\u300d\uff0c\u900f\u904e EventBus \u5ee3\u64ad\u7d66\u6240\u6709 Skald\u3002"}),"\n",(0,i.jsx)(s.li,{children:"Skald \u67e5\u8a62\u81ea\u8eab\u662f\u5426\u6709\u5c0d\u61c9\u4efb\u52d9 ID \u7684 TaskWorker\uff0c\u82e5\u6709\u5247\u5c07\u5176\u95dc\u9589\u3002"}),"\n",(0,i.jsx)(s.li,{children:"TaskWorker Process \u63a5\u6536\u4f5c\u696d\u7cfb\u7d71\u4e8b\u4ef6\uff08\u5982 SIGTERM\uff09\u3002"}),"\n",(0,i.jsx)(s.li,{children:"Process \u95dc\u9589\u524d\uff0c\u5c07Heartbeat\u6539\u70ba-2\u3002"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"\u53d6\u6d88\u4efb\u52d9\u6d41\u7a0b\u5716",src:n(4780).A+"",width:"1561",height:"640"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.p,{children:"\u900f\u904e\u4e0a\u8ff0\u4e8b\u4ef6\u9a45\u52d5\u7684\u4efb\u52d9\u751f\u547d\u9031\u671f\u8a2d\u8a08\uff0cSkalds \u80fd\u5920\u5be6\u73fe\u9ad8\u6548\u3001\u5f48\u6027\u4e14\u53ef\u64f4\u5c55\u7684\u5206\u6563\u5f0f\u4efb\u52d9\u7ba1\u7406\uff0c\u4e26\u78ba\u4fdd\u4efb\u52d9\u72c0\u614b\u8207\u8cc7\u6e90\u4f7f\u7528\u7684\u5373\u6642\u540c\u6b65\u8207\u6700\u4f73\u5316\u3002"})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},9863:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var l=n(9729);const i={},r=l.createContext(i);function t(e){const s=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),l.createElement(r.Provider,{value:s},e.children)}}}]);