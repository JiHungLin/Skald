"use strict";(self.webpackChunkwebsite_2=self.webpackChunkwebsite_2||[]).push([[159],{9500:(s,n,e)=>{e.r(n),e.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"documents/system_controller/dispatcher","title":"Dispatcher\uff08\u4efb\u52d9\u8abf\u5ea6\u6a21\u7d44\uff09\u6280\u8853\u8aaa\u660e","description":"Dispatcher \u662f System Controller \u7684\u667a\u80fd\u4efb\u52d9\u5206\u6d3e\u6838\u5fc3\u6a21\u7d44\uff0c\u8ca0\u8cac\u6839\u64da\u5373\u6642\u8cc7\u6e90\u72c0\u614b\u8207\u7b56\u7565\uff0c\u5c07\u5f85\u5206\u6d3e\u4efb\u52d9\u81ea\u52d5\u5206\u914d\u7d66\u6700\u5408\u9069\u7684 Skald \u7bc0\u9ede\u3002\u5176\u8a2d\u8a08\u76ee\u6a19\u70ba\u52d5\u614b\u8ca0\u8f09\u5e73\u8861\u3001\u8cc7\u6e90\u6700\u4f73\u5316\u8207\u9ad8\u53ef\u7528\u6027\uff0c\u78ba\u4fdd\u5206\u6563\u5f0f\u4efb\u52d9\u8abf\u5ea6\u7cfb\u7d71\u80fd\u9ad8\u6548\u904b\u4f5c\u3002","source":"@site/docs/documents/system_controller/dispatcher.md","sourceDirName":"documents/system_controller","slug":"/documents/system_controller/dispatcher","permalink":"/Skalds/docs/documents/system_controller/dispatcher","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Dispatcher"},"sidebar":"documentsSidebar","previous":{"title":"Monitor","permalink":"/Skalds/docs/documents/system_controller/monitor"}}');var r=e(5813),i=e(9863);const d={sidebar_position:2,sidebar_label:"Dispatcher"},c="Dispatcher\uff08\u4efb\u52d9\u8abf\u5ea6\u6a21\u7d44\uff09\u6280\u8853\u8aaa\u660e",h={},t=[{value:"1. \u67b6\u69cb\u5b9a\u4f4d\u8207\u89d2\u8272",id:"1-\u67b6\u69cb\u5b9a\u4f4d\u8207\u89d2\u8272",level:2},{value:"2. \u904b\u4f5c\u6d41\u7a0b",id:"2-\u904b\u4f5c\u6d41\u7a0b",level:2},{value:"3. \u5206\u6d3e\u7b56\u7565",id:"3-\u5206\u6d3e\u7b56\u7565",level:2},{value:"4. \u4e3b\u8981\u7a0b\u5f0f\u78bc\u7d50\u69cb",id:"4-\u4e3b\u8981\u7a0b\u5f0f\u78bc\u7d50\u69cb",level:2},{value:"5. \u914d\u7f6e\u8207\u555f\u52d5\u65b9\u5f0f",id:"5-\u914d\u7f6e\u8207\u555f\u52d5\u65b9\u5f0f",level:2},{value:"5.1 \u555f\u52d5 Dispatcher \u6a21\u5f0f",id:"51-\u555f\u52d5-dispatcher-\u6a21\u5f0f",level:3},{value:"5.2 \u4e3b\u8981\u74b0\u5883\u8b8a\u6578",id:"52-\u4e3b\u8981\u74b0\u5883\u8b8a\u6578",level:3},{value:"6. API \u8207\u76e3\u63a7",id:"6-api-\u8207\u76e3\u63a7",level:2},{value:"7. \u5178\u578b\u61c9\u7528\u5834\u666f",id:"7-\u5178\u578b\u61c9\u7528\u5834\u666f",level:2},{value:"8. \u6548\u80fd\u512a\u5316\u8207\u6700\u4f73\u5be6\u8e10",id:"8-\u6548\u80fd\u512a\u5316\u8207\u6700\u4f73\u5be6\u8e10",level:2},{value:"9. \u5e38\u898b\u554f\u984c\u8207\u9664\u932f",id:"9-\u5e38\u898b\u554f\u984c\u8207\u9664\u932f",level:2},{value:"10. \u53c3\u8003\u6587\u4ef6\u8207\u5ef6\u4f38\u95b1\u8b80",id:"10-\u53c3\u8003\u6587\u4ef6\u8207\u5ef6\u4f38\u95b1\u8b80",level:2}];function o(s){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...s.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"dispatcher\u4efb\u52d9\u8abf\u5ea6\u6a21\u7d44\u6280\u8853\u8aaa\u660e",children:"Dispatcher\uff08\u4efb\u52d9\u8abf\u5ea6\u6a21\u7d44\uff09\u6280\u8853\u8aaa\u660e"})}),"\n",(0,r.jsxs)(n.p,{children:["Dispatcher \u662f System Controller \u7684",(0,r.jsx)(n.strong,{children:"\u667a\u80fd\u4efb\u52d9\u5206\u6d3e\u6838\u5fc3\u6a21\u7d44"}),"\uff0c\u8ca0\u8cac\u6839\u64da\u5373\u6642\u8cc7\u6e90\u72c0\u614b\u8207\u7b56\u7565\uff0c\u5c07\u5f85\u5206\u6d3e\u4efb\u52d9\u81ea\u52d5\u5206\u914d\u7d66\u6700\u5408\u9069\u7684 Skald \u7bc0\u9ede\u3002\u5176\u8a2d\u8a08\u76ee\u6a19\u70ba\u52d5\u614b\u8ca0\u8f09\u5e73\u8861\u3001\u8cc7\u6e90\u6700\u4f73\u5316\u8207\u9ad8\u53ef\u7528\u6027\uff0c\u78ba\u4fdd\u5206\u6563\u5f0f\u4efb\u52d9\u8abf\u5ea6\u7cfb\u7d71\u80fd\u9ad8\u6548\u904b\u4f5c\u3002"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-\u67b6\u69cb\u5b9a\u4f4d\u8207\u89d2\u8272",children:"1. \u67b6\u69cb\u5b9a\u4f4d\u8207\u89d2\u8272"}),"\n",(0,r.jsx)(n.p,{children:"Dispatcher \u96b8\u5c6c\u65bc System Controller\uff0c\u8207 Monitor\u3001API \u670d\u52d9\u7b49\u6a21\u7d44\u5354\u540c\u904b\u4f5c\u3002\u5176\u4e3b\u8981\u8077\u8cac\u5982\u4e0b\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u81ea\u52d5\u5206\u6d3e\u4efb\u52d9"}),"\uff1a\u5b9a\u671f\u5f9e\u8cc7\u6599\u5eab\uff08MongoDB\uff09\u6293\u53d6\u5f85\u5206\u6d3e\u4efb\u52d9\uff0c\u6839\u64da\u7b56\u7565\u9078\u64c7\u5408\u9069 Skald \u7bc0\u9ede\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u52d5\u614b\u8ca0\u8f09\u5e73\u8861"}),"\uff1a\u6839\u64da Skald \u7576\u524d\u8ca0\u8f09\uff08\u4efb\u52d9\u6578\u91cf\uff09\u8207\u72c0\u614b\uff0c\u5be6\u73fe\u6700\u5c11\u4efb\u52d9\u512a\u5148\u3001\u8f2a\u8a62\u3001\u96a8\u6a5f\u7b49\u591a\u7a2e\u5206\u6d3e\u7b56\u7565\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4e8b\u4ef6\u9a45\u52d5"}),"\uff1a\u5206\u6d3e\u5f8c\uff0c\u900f\u904e Kafka \u767c\u5e03\u4efb\u52d9\u5206\u914d\u4e8b\u4ef6\uff0c\u9a45\u52d5 Skald \u7bc0\u9ede\u5efa\u7acb Task Worker\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u72c0\u614b\u540c\u6b65"}),"\uff1a\u5373\u6642\u66f4\u65b0\u4efb\u52d9\u57f7\u884c\u8005\uff08executor\uff09\u8207\u72c0\u614b\uff0c\u78ba\u4fdd\u7cfb\u7d71\u72c0\u614b\u4e00\u81f4\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u53c3\u8003\u67b6\u69cb\u8207\u6a21\u7d44\u8aaa\u660e\uff1a",(0,r.jsx)(n.a,{href:"/Skalds/docs/documents/system_controller/",children:"System Controller \u6280\u8853\u8aaa\u660e"}),"\u3001",(0,r.jsx)(n.a,{href:"/Skalds/docs/intro",children:"Skalds \u67b6\u69cb\u4ecb\u7d39"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-\u904b\u4f5c\u6d41\u7a0b",children:"2. \u904b\u4f5c\u6d41\u7a0b"}),"\n",(0,r.jsx)(n.p,{children:"Dispatcher \u7684\u6838\u5fc3\u904b\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5b9a\u6642\u8f2a\u8a62"}),"\uff1a\u6bcf\u9694\u56fa\u5b9a\u79d2\u6578\uff08\u9810\u8a2d 5 \u79d2\uff09\uff0c\u81ea\u52d5\u57f7\u884c\u5206\u6d3e\u6d41\u7a0b\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7be9\u9078\u5f85\u5206\u6d3e\u4efb\u52d9"}),"\uff1a\u5f9e MongoDB \u53d6\u5f97\u6240\u6709\u72c0\u614b\u70ba\u300c\u672a\u5206\u6d3e\u300d\u7684\u4efb\u52d9\uff08\u6392\u9664 Running\u3001Assigning\u3001Cancelled\u3001Paused\u3001Finished\uff09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u53d6\u5f97\u53ef\u7528 Skald \u7bc0\u9ede"}),"\uff1a\u50c5\u9078\u64c7\u7dda\u4e0a\u4e14\u985e\u578b\u70ba node \u7684 Skald\uff0c\u4e26\u53d6\u5f97\u5176\u7576\u524d\u4efb\u52d9\u6578\u91cf\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5206\u6d3e\u7b56\u7565\u9078\u64c7"}),"\uff1a\u6839\u64da\u8a2d\u5b9a\u7684\u7b56\u7565\uff08\u5982\u6700\u5c11\u4efb\u52d9\u3001\u8f2a\u8a62\u3001\u96a8\u6a5f\uff09\u6c7a\u5b9a\u5206\u6d3e\u5c0d\u8c61\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u66f4\u65b0\u4efb\u52d9\u72c0\u614b"}),"\uff1a\u5c07\u4efb\u52d9\u7684 executor \u6b04\u4f4d\u8a2d\u70ba\u9078\u5b9a Skald ID\uff0c\u72c0\u614b\u6539\u70ba Assigning\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u767c\u5e03\u5206\u6d3e\u4e8b\u4ef6"}),"\uff1a\u900f\u904e Kafka \u767c\u5e03 ",(0,r.jsx)(n.code,{children:"task.assign"})," \u4e8b\u4ef6\uff0c\u901a\u77e5 Skald \u7bc0\u9ede\u5efa\u7acb Task Worker\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u76e3\u63a7\u8207\u91cd\u8a66"}),"\uff1a\u82e5\u5206\u6d3e\u5931\u6557\u6216 Skald \u4e0d\u53ef\u7528\uff0c\u6703\u81ea\u52d5\u91cd\u8a66\u4e26\u8a18\u9304\u65e5\u8a8c\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u8a73\u7d30\u6d41\u7a0b\u8207\u72c0\u614b\u8f49\u63db\u8acb\u53c3\u8003\uff1a",(0,r.jsx)(n.a,{href:"/Skalds/docs/documents/task_lifecycle",children:"\u4efb\u52d9\u751f\u547d\u9031\u671f"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-\u5206\u6d3e\u7b56\u7565",children:"3. \u5206\u6d3e\u7b56\u7565"}),"\n",(0,r.jsx)(n.p,{children:"Dispatcher \u652f\u63f4\u591a\u7a2e\u5206\u6d3e\u7b56\u7565\uff0c\u53ef\u4f9d\u64da\u5be6\u969b\u9700\u6c42\u8abf\u6574\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6700\u5c11\u4efb\u52d9\uff08LEAST_TASKS\uff09"}),"\uff1a\u512a\u5148\u5206\u6d3e\u7d66\u7576\u524d\u4efb\u52d9\u6578\u6700\u5c11\u7684 Skald\uff0c\u5be6\u73fe\u8ca0\u8f09\u5747\u8861\uff08\u9810\u8a2d\uff09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8f2a\u8a62\uff08ROUND_ROBIN\uff09"}),"\uff1a\u4f9d\u5e8f\u5206\u6d3e\uff0c\u78ba\u4fdd\u4efb\u52d9\u5e73\u5747\u5206\u5e03\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u96a8\u6a5f\uff08RANDOM\uff09"}),"\uff1a\u96a8\u6a5f\u9078\u64c7\u53ef\u7528 Skald\uff0c\u9069\u5408\u4efb\u52d9\u8ca0\u8f09\u5dee\u7570\u4e0d\u5927\u6642\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u53ef\u65bc\u74b0\u5883\u8b8a\u6578\u6216\u8a2d\u5b9a\u6a94\u8abf\u6574\u7b56\u7565\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# .env \u6216\u90e8\u7f72\u74b0\u5883\u8b8a\u6578\nDISPATCHER_STRATEGY=LEAST_TASKS  # \u53ef\u9078 LEAST_TASKS|ROUND_ROBIN|RANDOM\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u7b56\u7565\u5217\u8209\u5b9a\u7fa9\u65bc ",(0,r.jsx)(n.a,{href:"https://github.com/JiHungLin/skalds/blob/main/skalds/config/_enum.py",children:"skalds/config/_enum.py (GitHub)"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-\u4e3b\u8981\u7a0b\u5f0f\u78bc\u7d50\u69cb",children:"4. \u4e3b\u8981\u7a0b\u5f0f\u78bc\u7d50\u69cb"}),"\n",(0,r.jsxs)(n.p,{children:["Dispatcher \u4e3b\u8981\u5be6\u4f5c\u65bc ",(0,r.jsx)(n.a,{href:"https://github.com/JiHungLin/skalds/blob/main/skalds/system_controller/monitor/dispatcher.py",children:"skalds/system_controller/monitor/dispatcher.py (GitHub)"}),"\uff0c\u5176\u6838\u5fc3\u985e\u5225\u8207\u65b9\u6cd5\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Dispatcher"}),"\uff1a\u55ae\u4f8b\u985e\u5225\uff0c\u8ca0\u8cac\u5206\u6d3e\u4e3b\u6d41\u7a0b\u8207\u7b56\u7565\u9078\u64c7\u3002","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"start()"})," / ",(0,r.jsx)(n.code,{children:"stop()"}),"\uff1a\u555f\u52d5\u8207\u505c\u6b62\u5206\u6d3e\u57f7\u884c\u7dd2\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"_dispatch_tasks()"}),"\uff1a\u5206\u6d3e\u4e3b\u908f\u8f2f\uff0c\u5305\u542b\u4efb\u52d9\u7be9\u9078\u3001Skald \u9078\u64c7\u3001\u72c0\u614b\u66f4\u65b0\u8207\u4e8b\u4ef6\u767c\u5e03\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"_calculate_assignments()"}),"\uff1a\u6839\u64da\u7b56\u7565\u8a08\u7b97\u4efb\u52d9\u5206\u6d3e\u5c0d\u61c9\u8868\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"_assign_task_to_skald()"}),"\uff1a\u57f7\u884c\u55ae\u4e00\u4efb\u52d9\u7684\u5206\u6d3e\u8207\u4e8b\u4ef6\u767c\u5e03\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"set_strategy()"}),"\uff1a\u52d5\u614b\u5207\u63db\u5206\u6d3e\u7b56\u7565\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"get_status()"}),"\uff1a\u53d6\u5f97\u7576\u524d\u5206\u6d3e\u72c0\u614b\u8207\u7d71\u8a08\u8cc7\u8a0a\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u8a73\u7d30\u7a0b\u5f0f\u78bc\u8acb\u53c3\u8003 ",(0,r.jsx)(n.a,{href:"https://github.com/JiHungLin/skalds/blob/main/skalds/system_controller/monitor/dispatcher.py",children:"dispatcher.py (GitHub)"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-\u914d\u7f6e\u8207\u555f\u52d5\u65b9\u5f0f",children:"5. \u914d\u7f6e\u8207\u555f\u52d5\u65b9\u5f0f"}),"\n",(0,r.jsx)(n.h3,{id:"51-\u555f\u52d5-dispatcher-\u6a21\u5f0f",children:"5.1 \u555f\u52d5 Dispatcher \u6a21\u5f0f"}),"\n",(0,r.jsxs)(n.p,{children:["System Controller \u53ef\u900f\u904e\u74b0\u5883\u8b8a\u6578 ",(0,r.jsx)(n.code,{children:"SYSTEM_CONTROLLER_MODE=DISPATCHER"})," \u555f\u52d5\u5b8c\u6574\u5206\u6d3e\u529f\u80fd\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export SYSTEM_CONTROLLER_MODE=DISPATCHER\npython -m skalds.system_controller.main\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u9700\u540c\u6642\u555f\u52d5 Redis\u3001MongoDB\u3001Kafka \u7b49\u670d\u52d9\uff0c\u8a73\u898b",(0,r.jsx)(n.a,{href:"../../../../skalds/system_controller/DEPLOYMENT.md",children:"\u90e8\u7f72\u8aaa\u660e"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"52-\u4e3b\u8981\u74b0\u5883\u8b8a\u6578",children:"5.2 \u4e3b\u8981\u74b0\u5883\u8b8a\u6578"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DISPATCHER_INTERVAL"}),"\uff1a\u5206\u6d3e\u8f2a\u8a62\u9593\u9694\uff08\u79d2\uff0c\u9810\u8a2d 5\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DISPATCHER_STRATEGY"}),"\uff1a\u5206\u6d3e\u7b56\u7565\uff08LEAST_TASKS\u3001ROUND_ROBIN\u3001RANDOM\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5176\u4ed6\u76f8\u95dc\u8a2d\u5b9a\u8acb\u53c3\u8003 ",(0,r.jsx)(n.a,{href:"https://github.com/JiHungLin/skalds/blob/main/skalds/config/system_controller_config.py",children:"skalds/config/system_controller_config.py (GitHub)"})," \u8207 ",(0,r.jsx)(n.code,{children:".env.example"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-api-\u8207\u76e3\u63a7",children:"6. API \u8207\u76e3\u63a7"}),"\n",(0,r.jsx)(n.p,{children:"Dispatcher \u904b\u4f5c\u6642\uff0c\u6240\u6709\u5206\u6d3e\u72c0\u614b\u8207\u7d71\u8a08\u8cc7\u8a0a\u53ef\u900f\u904e System Controller API \u67e5\u8a62\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u7cfb\u7d71\u72c0\u614b\u67e5\u8a62"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"GET /api/system/status"}),(0,r.jsx)(n.br,{}),"\n","\u56de\u50b3\u7576\u524d\u6a21\u5f0f\u3001\u5404\u7d44\u4ef6\u904b\u4f5c\u72c0\u614b\u3001Dispatcher \u8a73\u7d30\u8cc7\u8a0a\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u5206\u6d3e\u72c0\u614b\u67e5\u8a62"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"GET /api/system/metrics"}),(0,r.jsx)(n.br,{}),"\n","\u5305\u542b Skalds \u72c0\u614b\u3001\u4efb\u52d9\u5206\u5e03\u3001\u5206\u6d3e\u7b56\u7565\u8207\u6548\u80fd\u6307\u6a19\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u5373\u6642\u4e8b\u4ef6\u76e3\u63a7"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"GET /api/events/skalds"}),"\u3001",(0,r.jsx)(n.code,{children:"GET /api/events/tasks"}),(0,r.jsx)(n.br,{}),"\n","\u900f\u904e SSE \u76e3\u63a7 Skalds \u8207\u4efb\u52d9\u7684\u5373\u6642\u72c0\u614b\u3001\u5fc3\u8df3\u3001\u932f\u8aa4\u7b49\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["API \u8a73\u7d30\u8aaa\u660e\u8acb\u53c3\u8003 ",(0,r.jsx)(n.a,{href:"../../../../skalds/system_controller/API.md",children:(0,r.jsx)(n.code,{children:"API.md"})})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-\u5178\u578b\u61c9\u7528\u5834\u666f",children:"7. \u5178\u578b\u61c9\u7528\u5834\u666f"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u9ad8\u4f75\u767c\u4efb\u52d9\u5206\u6d3e"}),"\uff1a\u81ea\u52d5\u5c07\u5927\u91cf\u4efb\u52d9\u5206\u914d\u7d66\u6700\u5408\u9069\u7684 Skald \u7bc0\u9ede\uff0c\u63d0\u5347\u7cfb\u7d71\u541e\u5410\u91cf\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u52d5\u614b\u8ca0\u8f09\u5e73\u8861"}),"\uff1a\u6839\u64da Skald \u8ca0\u8f09\u5373\u6642\u8abf\u6574\u5206\u6d3e\uff0c\u907f\u514d\u55ae\u9ede\u904e\u8f09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u591a\u79df\u6236/\u591a\u7bc0\u9ede\u5354\u540c"}),"\uff1a\u652f\u63f4\u591a Skald \u7bc0\u9ede\u5354\u540c\u904b\u4f5c\uff0c\u9069\u5408\u5927\u898f\u6a21\u5206\u6563\u5f0f\u5834\u666f\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7dca\u6025\u4efb\u52d9\u512a\u5148\u8655\u7406"}),"\uff1a\u53ef\u6839\u64da\u4efb\u52d9\u512a\u5148\u6b0a\u9032\u884c\u6392\u5e8f\uff0c\u78ba\u4fdd\u9ad8\u512a\u5148\u4efb\u52d9\u5373\u6642\u5206\u6d3e\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-\u6548\u80fd\u512a\u5316\u8207\u6700\u4f73\u5be6\u8e10",children:"8. \u6548\u80fd\u512a\u5316\u8207\u6700\u4f73\u5be6\u8e10"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5408\u7406\u8a2d\u5b9a\u5206\u6d3e\u9593\u9694"}),"\uff1a\u6839\u64da\u4efb\u52d9\u91cf\u8207\u7cfb\u7d71\u898f\u6a21\u8abf\u6574 ",(0,r.jsx)(n.code,{children:"DISPATCHER_INTERVAL"}),"\uff0c\u907f\u514d\u904e\u5ea6\u8f2a\u8a62\u6216\u5ef6\u9072\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7b56\u7565\u9078\u64c7"}),"\uff1a\u6839\u64da\u5be6\u969b\u8ca0\u8f09\u9078\u64c7\u6700\u9069\u5408\u7684\u5206\u6d3e\u7b56\u7565\uff0c\u52d5\u614b\u5207\u63db\u53ef\u63d0\u5347\u5f48\u6027\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u76e3\u63a7\u8207\u65e5\u8a8c"}),"\uff1a\u7d50\u5408 Monitor \u8207\u65e5\u8a8c\u7cfb\u7d71\uff0c\u53ca\u6642\u767c\u73fe\u5206\u6d3e\u7570\u5e38\u8207\u8cc7\u6e90\u74f6\u9838\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u9ad8\u53ef\u7528\u90e8\u7f72"}),"\uff1a\u5efa\u8b70\u642d\u914d\u591a\u526f\u672c\u3001Redis Cluster\u3001Kafka \u5206\u5340\u7b49\u9ad8\u53ef\u7528\u67b6\u69cb\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"9-\u5e38\u898b\u554f\u984c\u8207\u9664\u932f",children:"9. \u5e38\u898b\u554f\u984c\u8207\u9664\u932f"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7121\u53ef\u7528 Skald \u7bc0\u9ede"}),"\uff1a\u8acb\u78ba\u8a8d Skald node \u7bc0\u9ede\u5df2\u8a3b\u518a\u4e14\u7dda\u4e0a\uff0c\u4e26\u6aa2\u67e5 Redis/MongoDB \u9023\u7dda\u72c0\u614b\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4efb\u52d9\u672a\u5206\u6d3e"}),"\uff1a\u6aa2\u67e5\u4efb\u52d9\u72c0\u614b\u662f\u5426\u6b63\u78ba\uff08\u975e Running/Assigning/Cancelled\uff09\uff0c\u4e26\u78ba\u8a8d\u5206\u6d3e\u7b56\u7565\u8207\u689d\u4ef6\u8a2d\u5b9a\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Kafka \u767c\u5e03\u5931\u6557"}),"\uff1a\u78ba\u8a8d Kafka \u670d\u52d9\u6b63\u5e38\u904b\u4f5c\uff0c\u4e26\u6aa2\u67e5 topic \u8a2d\u5b9a\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5206\u6d3e\u7b56\u7565\u7570\u5e38"}),"\uff1a\u53ef\u900f\u904e API \u52d5\u614b\u67e5\u8a62\u8207\u5207\u63db\u7b56\u7565\uff0c\u4e26\u6aa2\u67e5\u65e5\u8a8c\u7372\u53d6\u8a73\u7d30\u932f\u8aa4\u8cc7\u8a0a\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"10-\u53c3\u8003\u6587\u4ef6\u8207\u5ef6\u4f38\u95b1\u8b80",children:"10. \u53c3\u8003\u6587\u4ef6\u8207\u5ef6\u4f38\u95b1\u8b80"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/Skalds/docs/documents/system_controller/",children:"System Controller \u6280\u8853\u8aaa\u660e"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/Skalds/docs/documents/system_controller/monitor",children:"Monitor \u76e3\u63a7\u6a21\u7d44"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/Skalds/docs/documents/task_lifecycle",children:"\u4efb\u52d9\u751f\u547d\u9031\u671f\u8207\u4e8b\u4ef6\u6d41"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/Skalds/docs/intro",children:"Skalds \u67b6\u69cb\u8207\u6a21\u7d44\u7d30\u7bc0"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/Skalds/docs/documents/cache_memory",children:"Cache Memory \u5feb\u53d6\u8aaa\u660e"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/Skalds/docs/documents/event_queue",children:"EventQueue \u4e8b\u4ef6\u4f47\u5217\u8aaa\u660e"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"Dispatcher \u662f Skalds \u5206\u6563\u5f0f\u4efb\u52d9\u8abf\u5ea6\u7cfb\u7d71\u7684\u667a\u80fd\u5206\u6d3e\u6838\u5fc3\uff0c\u6b63\u78ba\u914d\u7f6e\u8207\u5584\u7528\u53ef\u5927\u5e45\u63d0\u5347\u7cfb\u7d71\u7684\u5f48\u6027\u3001\u6548\u80fd\u8207\u53ef\u7dad\u8b77\u6027\u3002"})]})}function a(s={}){const{wrapper:n}={...(0,i.R)(),...s.components};return n?(0,r.jsx)(n,{...s,children:(0,r.jsx)(o,{...s})}):o(s)}},9863:(s,n,e)=>{e.d(n,{R:()=>d,x:()=>c});var l=e(9729);const r={},i=l.createContext(r);function d(s){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof s?s(n):{...n,...s}},[n,s])}function c(s){let n;return n=s.disableParentContext?"function"==typeof s.components?s.components(r):s.components||r:d(s.components),l.createElement(i.Provider,{value:n},s.children)}}}]);