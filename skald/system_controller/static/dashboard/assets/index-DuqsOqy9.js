var ie=Object.defineProperty;var oe=(t,e,a)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var F=(t,e,a)=>oe(t,typeof e!="symbol"?e+"":e,a);import{j as r,u as $,Q as le,a as ce}from"./query-CKRroiZA.js";import{a as de,r as c,b as ue}from"./vendor-Gm9i_4Ku.js";import{u as me,L as I,a as he,R as fe,b as A,B as ge}from"./router-jua2Vyaz.js";import{u as xe,f as q,g as pe,a as ye}from"./table-iqIhI9LJ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();var Y={},_=de;Y.createRoot=_.createRoot,Y.hydrateRoot=_.hydrateRoot;function be({title:t,titleId:e,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},a),t?c.createElement("title",{id:e},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const we=c.forwardRef(be);function je({title:t,titleId:e,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},a),t?c.createElement("title",{id:e},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ve=c.forwardRef(je);function ke({title:t,titleId:e,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},a),t?c.createElement("title",{id:e},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Ne=c.forwardRef(ke);function Se({title:t,titleId:e,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},a),t?c.createElement("title",{id:e},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const Me=c.forwardRef(Se);function Pe({title:t,titleId:e,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},a),t?c.createElement("title",{id:e},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const Z=c.forwardRef(Pe);function Oe({title:t,titleId:e,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},a),t?c.createElement("title",{id:e},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const De=c.forwardRef(Oe);function Ce({title:t,titleId:e,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},a),t?c.createElement("title",{id:e},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const K=c.forwardRef(Ce);function Te({title:t,titleId:e,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},a),t?c.createElement("title",{id:e},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const C=c.forwardRef(Te);function Ee({title:t,titleId:e,...a},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},a),t?c.createElement("title",{id:e},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const We=c.forwardRef(Ee),B=[{name:"Dashboard",href:"/",icon:De},{name:"Skalds",href:"/skalds",icon:K},{name:"Tasks",href:"/tasks",icon:Z}];function Fe({children:t}){const[e,a]=c.useState(!1),n=me();return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsxs("div",{className:`fixed inset-0 z-40 lg:hidden ${e?"":"hidden"}`,children:[r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>a(!1)}),r.jsxs("div",{className:"relative flex w-full max-w-xs flex-1 flex-col bg-white",children:[r.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:r.jsx("button",{type:"button",className:"ml-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>a(!1),children:r.jsx(We,{className:"h-6 w-6 text-white"})})}),r.jsxs("div",{className:"h-0 flex-1 overflow-y-auto pt-5 pb-4",children:[r.jsx("div",{className:"flex flex-shrink-0 items-center px-4",children:r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Skald Dashboard"})}),r.jsx("nav",{className:"mt-5 space-y-1 px-2",children:B.map(s=>{const i=n.pathname===s.href;return r.jsxs(I,{to:s.href,className:`group flex items-center px-2 py-2 text-base font-medium rounded-md ${i?"bg-primary-100 text-primary-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,onClick:()=>a(!1),children:[r.jsx(s.icon,{className:`mr-4 h-6 w-6 flex-shrink-0 ${i?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),s.name]},s.name)})})]})]})]}),r.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:r.jsx("div",{className:"flex min-h-0 flex-1 flex-col bg-white border-r border-gray-200",children:r.jsxs("div",{className:"flex flex-1 flex-col overflow-y-auto pt-5 pb-4",children:[r.jsx("div",{className:"flex flex-shrink-0 items-center px-4",children:r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Skald Dashboard"})}),r.jsx("nav",{className:"mt-5 flex-1 space-y-1 px-2",children:B.map(s=>{const i=n.pathname===s.href;return r.jsxs(I,{to:s.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md ${i?"bg-primary-100 text-primary-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(s.icon,{className:`mr-3 h-6 w-6 flex-shrink-0 ${i?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),s.name]},s.name)})})]})})}),r.jsxs("div",{className:"lg:pl-64",children:[r.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 lg:hidden",children:r.jsxs("div",{className:"flex h-16 items-center justify-between px-4",children:[r.jsx("button",{type:"button",className:"border-r border-gray-200 px-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden",onClick:()=>a(!0),children:r.jsx(we,{className:"h-6 w-6"})}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Skald Dashboard"}),r.jsx("div",{className:"w-10"})," "]})}),r.jsx("main",{className:"flex-1",children:r.jsx("div",{className:"py-6",children:r.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t})})})]})]})}const D=[{id:"skald-node-001",type:"node",status:"online",lastHeartbeat:new Date().toISOString(),supportedTasks:["data_processing","ml_training","file_conversion"],currentTasks:["task-001","task-003"]},{id:"skald-node-002",type:"node",status:"online",lastHeartbeat:new Date(Date.now()-3e4).toISOString(),supportedTasks:["data_processing","image_processing"],currentTasks:["task-002"]},{id:"skald-edge-001",type:"edge",status:"offline",lastHeartbeat:new Date(Date.now()-3e5).toISOString(),supportedTasks:["sensor_data","edge_computing"],currentTasks:[]}],v=[{id:"task-001",type:"data_processing",status:"Running",executor:"skald-node-001",createdAt:new Date(Date.now()-36e5).toISOString(),updatedAt:new Date(Date.now()-18e5).toISOString(),attachments:{inputFile:"data.csv",outputPath:"/tmp/processed"},heartbeat:150,error:void 0,exception:void 0},{id:"task-002",type:"ml_training",status:"Running",executor:"skald-node-002",createdAt:new Date(Date.now()-72e5).toISOString(),updatedAt:new Date(Date.now()-9e5).toISOString(),attachments:{model:"neural_network",dataset:"training_data.json"},heartbeat:75,error:void 0,exception:void 0},{id:"task-003",type:"file_conversion",status:"Completed",executor:"skald-node-001",createdAt:new Date(Date.now()-18e5).toISOString(),updatedAt:new Date(Date.now()-3e5).toISOString(),attachments:{sourceFile:"document.pdf",targetFormat:"docx"},heartbeat:200,error:void 0,exception:void 0},{id:"task-004",type:"data_processing",status:"Failed",executor:"skald-node-002",createdAt:new Date(Date.now()-54e5).toISOString(),updatedAt:new Date(Date.now()-36e5).toISOString(),attachments:{inputFile:"corrupted_data.csv"},heartbeat:-1,error:"File format not supported",exception:"ValueError: Invalid data format"},{id:"task-005",type:"image_processing",status:"Created",executor:void 0,createdAt:new Date(Date.now()-6e5).toISOString(),updatedAt:new Date(Date.now()-6e5).toISOString(),attachments:{images:["img1.jpg","img2.jpg"],filter:"blur"},heartbeat:0,error:void 0,exception:void 0}];class Ae{constructor(){F(this,"baseUrl");F(this,"useMockData",!1);this.baseUrl=window.location.origin,this.useMockData=!1,console.log(`API Client initialized - Base URL: ${this.baseUrl}, Mock Data: ${this.useMockData}`)}async fetchApi(e,a){const n=`${this.baseUrl}${e}`;console.log(`Making API call to: ${n}`);try{const s=await fetch(n,{headers:{"Content-Type":"application/json",...a==null?void 0:a.headers},...a});if(!s.ok)throw console.error(`API call failed: ${s.status} ${s.statusText}`),new Error(`HTTP error! status: ${s.status} - ${s.statusText}`);const i=await s.json();return console.log(`API call successful for ${e}:`,i),i}catch(s){throw console.error(`API call failed for ${e}:`,s),this.useMockData,s}}getMockData(e){if(e.includes("/api/skalds"))return{items:D,total:D.length};if(e.includes("/api/tasks"))return{items:v,total:v.length,page:1,pageSize:20};if(e.includes("/api/system/dashboard/summary"))return{totalSkalds:D.length,onlineSkalds:D.filter(a=>a.status==="online").length,totalTasks:v.length,runningTasks:v.filter(a=>a.status==="Running").length,completedTasks:v.filter(a=>a.status==="Completed").length,failedTasks:v.filter(a=>a.status==="Failed").length};throw new Error(`No mock data available for ${e}`)}async getSkalds(){return this.fetchApi("/api/skalds/")}async getSkald(e){return this.fetchApi(`/api/skalds/${e}`)}async getTasks(e){const a=new URLSearchParams({page:e.page.toString(),pageSize:e.pageSize.toString()});return e.status&&a.append("status",e.status),e.type&&a.append("type",e.type),e.executor&&a.append("executor",e.executor),this.fetchApi(`/api/tasks/?${a.toString()}`)}async getTask(e){return this.fetchApi(`/api/tasks/${e}`)}async updateTaskStatus(e,a){return this.fetchApi(`/api/tasks/${e}/status`,{method:"PUT",body:JSON.stringify(a)})}async updateTaskAttachments(e,a){return this.fetchApi(`/api/tasks/${e}/attachments`,{method:"PUT",body:JSON.stringify(a)})}async getDashboardSummary(){return this.fetchApi("/api/system/dashboard/summary")}}const H=new Ae;function ee(t){var e,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=ee(t[e]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function R(){for(var t,e,a=0,n="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=ee(t))&&(n&&(n+=" "),n+=e);return n}const Re={online:{color:"status-online",label:"Online",dotColor:"bg-success-500"},offline:{color:"status-offline",label:"Offline",dotColor:"bg-gray-500"},Created:{color:"status-created",label:"Created",dotColor:"bg-warning-500"},Assigning:{color:"status-assigning",label:"Assigning",dotColor:"bg-warning-500"},Running:{color:"status-running",label:"Running",dotColor:"bg-primary-500"},Completed:{color:"status-completed",label:"Completed",dotColor:"bg-success-500"},Failed:{color:"status-failed",label:"Failed",dotColor:"bg-danger-500"},Canceled:{color:"status-canceled",label:"Canceled",dotColor:"bg-gray-500"}},Le={sm:{badge:"px-2 py-1 text-xs",dot:"w-2 h-2"},md:{badge:"px-2.5 py-1.5 text-sm",dot:"w-3 h-3"},lg:{badge:"px-3 py-2 text-base",dot:"w-4 h-4"}};function N({status:t,size:e="md",showLabel:a=!0,animated:n=!1}){const s=Re[t],i=Le[e];return s?a?r.jsxs("span",{className:R("inline-flex items-center gap-1.5 rounded-full border font-medium",s.color,i.badge),children:[r.jsx("div",{className:R("rounded-full",i.dot,s.dotColor,n&&(t==="online"||t==="Running")&&"animate-heartbeat")}),s.label]}):r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:R("rounded-full",i.dot,s.dotColor,n&&(t==="online"||t==="Running")&&"animate-pulse")})}):null}function Ye(){const t=he(),{data:e,isLoading:a,error:n}=$({queryKey:["dashboard-summary"],queryFn:()=>H.getDashboardSummary(),retry:2,retryDelay:1e3});if(c.useEffect(()=>{console.log("Dashboard component mounted - API call status:",{isLoading:a,error:n,summary:e})},[a,n,e]),n)return console.error("Dashboard API error:",n),r.jsx("div",{className:"space-y-6",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(C,{className:"h-5 w-5 text-red-400"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"API Connection Error"}),r.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[r.jsx("p",{children:"Failed to load dashboard data. Please check:"}),r.jsxs("ul",{className:"list-disc list-inside mt-1",children:[r.jsx("li",{children:"SystemController backend is running"}),r.jsx("li",{children:"API endpoints are accessible"}),r.jsx("li",{children:"Network connectivity"})]}),r.jsxs("p",{className:"mt-2 font-mono text-xs bg-red-100 p-2 rounded",children:["Error: ",n instanceof Error?n.message:"Unknown error"]})]}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-sm btn-primary",children:"Retry"})})]})]})})});if(a)return r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),r.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((i,l)=>r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-content",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})},l))})]})});const s=[{name:"Total Skalds",value:(e==null?void 0:e.totalSkalds)||0,subValue:`${(e==null?void 0:e.onlineSkalds)||0} online`,icon:K,color:"text-primary-600",bgColor:"bg-primary-100"},{name:"Total Tasks",value:(e==null?void 0:e.totalTasks)||0,subValue:`${(e==null?void 0:e.runningTasks)||0} running`,icon:Z,color:"text-blue-600",bgColor:"bg-blue-100"},{name:"Completed Tasks",value:(e==null?void 0:e.completedTasks)||0,subValue:"Successfully finished",icon:ve,color:"text-success-600",bgColor:"bg-success-100"},{name:"Failed Tasks",value:(e==null?void 0:e.failedTasks)||0,subValue:"Need attention",icon:C,color:"text-danger-600",bgColor:"bg-danger-100"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Overview of your Skald system status and performance"})]}),r.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:s.map(i=>r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-content",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:`p-3 rounded-lg ${i.bgColor}`,children:r.jsx(i.icon,{className:`h-6 w-6 ${i.color}`})})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:i.name}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.value}),r.jsx("div",{className:"text-xs text-gray-400",children:i.subValue})]})]})})},i.name))}),r.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"System Status"})}),r.jsxs("div",{className:"card-content space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Skald Connectivity"}),r.jsxs("span",{className:"text-xs text-gray-500",children:[(e==null?void 0:e.onlineSkalds)||0," of ",(e==null?void 0:e.totalSkalds)||0," nodes online"]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:(()=>{const i=e!=null&&e.totalSkalds?e.onlineSkalds/e.totalSkalds:0;return i===1?r.jsx("div",{title:"Status: Online - All Skald nodes are connected and operational",children:r.jsx(N,{status:"online",animated:!0})}):i>=.7?r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1.5 text-sm bg-warning-100 text-warning-800 border-warning-200 cursor-help",title:`Status: Partial - ${Math.round(i*100)}% of nodes online (≥70% threshold met, but not all nodes available)`,children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-warning-500 animate-pulse"}),"Partial"]}):i>0?r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1.5 text-sm bg-danger-100 text-danger-800 border-danger-200 cursor-help",title:`Status: Degraded - Only ${Math.round(i*100)}% of nodes online (<70% threshold, system performance may be impacted)`,children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-danger-500 animate-pulse"}),"Degraded"]}):r.jsx("div",{title:"Status: Offline - No Skald nodes are currently connected",children:r.jsx(N,{status:"offline",animated:!0})})})()})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Task Processing"}),r.jsxs("span",{className:"text-xs text-gray-500",children:[(e==null?void 0:e.runningTasks)||0," running, ",(e==null?void 0:e.completedTasks)||0," completed"]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:(()=>{const i=(e==null?void 0:e.runningTasks)||0,l=(e==null?void 0:e.failedTasks)||0;return i>0?r.jsx("div",{title:`Status: Running - ${i} task(s) currently being processed`,children:r.jsx(N,{status:"Running",animated:!0})}):l===0?r.jsx("div",{title:"Status: Completed - No active tasks, all previous tasks completed successfully",children:r.jsx(N,{status:"Completed"})}):r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1.5 text-sm bg-warning-100 text-warning-800 border-warning-200 cursor-help",title:`Status: Idle - No tasks running, but ${l} failed task(s) require attention`,children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-warning-500"}),"Idle"]})})()})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"System Health"}),r.jsxs("span",{className:"text-xs text-gray-500",children:[(e==null?void 0:e.failedTasks)||0," failed tasks detected"]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:(()=>{const i=(e==null?void 0:e.failedTasks)||0,l=(e==null?void 0:e.totalTasks)||0,d=l>0?i/l:0;return i===0?r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1.5 text-sm bg-success-100 text-success-800 border-success-200 cursor-help",title:"Status: Healthy - No failed tasks detected, system operating normally",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-success-500"}),"Healthy"]}):d<.1?r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1.5 text-sm bg-warning-100 text-warning-800 border-warning-200 cursor-help",title:`Status: Warning - ${i} failed task(s), failure rate ${Math.round(d*100)}% (<10% threshold, monitor closely)`,children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-warning-500 animate-pulse"}),"Warning"]}):r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1.5 text-sm bg-danger-100 text-danger-800 border-danger-200 cursor-help",title:`Status: Critical - ${i} failed task(s), failure rate ${Math.round(d*100)}% (≥10% threshold, immediate attention required)`,children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-danger-500 animate-pulse"}),"Critical"]})})()})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"})}),r.jsxs("div",{className:"card-content space-y-3",children:[r.jsx("button",{className:"btn btn-primary btn-md w-full",onClick:()=>t("/tasks"),children:"View All Tasks"}),r.jsx("button",{className:"btn btn-primary btn-md w-full",onClick:()=>t("/skalds"),children:"Monitor Skalds"}),r.jsx("button",{className:"btn btn-primary btn-md w-full",onClick:()=>alert("System Logs feature coming soon!"),children:"System Logs"})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Status Legend"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Understanding system status indicators and their logic"})]}),r.jsx("div",{className:"card-content",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-3 font-medium text-gray-900",children:"Category"}),r.jsx("th",{className:"text-left py-3 font-medium text-gray-900",children:"Status"}),r.jsx("th",{className:"text-left py-3 font-medium text-gray-900",children:"Logic & Conditions"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100",children:[r.jsxs("tr",{children:[r.jsx("td",{rowSpan:4,className:"py-3 font-medium text-gray-900 align-top border-r border-gray-100",children:"Skald Connectivity"}),r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-success-100 text-success-800 border-success-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-success-500"}),"Online"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"All Skald nodes are connected and operational (100% online)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-warning-100 text-warning-800 border-warning-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-warning-500"}),"Partial"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"≥70% of nodes online, but not all nodes are available"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-danger-100 text-danger-800 border-danger-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-danger-500"}),"Degraded"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"<70% of nodes online, system performance may be impacted"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-gray-100 text-gray-800 border-gray-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"Offline"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"No Skald nodes are currently connected (0% online)"})]}),r.jsxs("tr",{children:[r.jsx("td",{rowSpan:3,className:"py-3 font-medium text-gray-900 align-top border-r border-gray-100",children:"Task Processing"}),r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-primary-100 text-primary-800 border-primary-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"}),"Running"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"One or more tasks are currently being processed"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-success-100 text-success-800 border-success-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-success-500"}),"Completed"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"No active tasks, all previous tasks completed successfully"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-warning-100 text-warning-800 border-warning-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-warning-500"}),"Idle"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"No tasks currently running, but failed tasks exist and require attention"})]}),r.jsxs("tr",{children:[r.jsx("td",{rowSpan:3,className:"py-3 font-medium text-gray-900 align-top border-r border-gray-100",children:"System Health"}),r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-success-100 text-success-800 border-success-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-success-500"}),"Healthy"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"No failed tasks detected, system operating normally (0% failure rate)"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-warning-100 text-warning-800 border-warning-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-warning-500"}),"Warning"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"Task failure rate <10%, system should be monitored closely"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-3",children:r.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-danger-100 text-danger-800 border-danger-200",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-danger-500"}),"Critical"]})}),r.jsx("td",{className:"py-3 text-gray-600",children:"Task failure rate ≥10%, immediate attention and intervention required"})]})]})]})})})]})]})}function te({data:t,columns:e,loading:a=!1,pagination:n,onRowClick:s}){const[i,l]=c.useState([]),d=e.map(u=>({accessorKey:u.key,header:u.header,enableSorting:u.sortable??!0,cell:({getValue:o,row:x})=>{const y=o();return u.render?u.render(y,x.original):String(y)}})),h=xe({data:t,columns:d,state:{sorting:i},onSortingChange:l,getCoreRowModel:ye(),getSortedRowModel:pe()});return a?r.jsx("div",{className:"card",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"card-header",children:r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})}),r.jsx("div",{className:"card-content space-y-3",children:[...Array(5)].map((u,o)=>r.jsx("div",{className:"h-4 bg-gray-200 rounded"},o))})]})}):r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:h.getHeaderGroups().map(u=>r.jsx("tr",{className:"border-b border-gray-200",children:u.headers.map(o=>r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.isPlaceholder?null:r.jsxs("div",{className:`flex items-center gap-2 ${o.column.getCanSort()?"cursor-pointer select-none":""}`,onClick:o.column.getToggleSortingHandler(),children:[q(o.column.columnDef.header,o.getContext()),o.column.getCanSort()&&r.jsxs("span",{className:"flex flex-col",children:[r.jsx(Me,{className:`w-3 h-3 ${o.column.getIsSorted()==="asc"?"text-primary-600":"text-gray-400"}`}),r.jsx(Ne,{className:`w-3 h-3 -mt-1 ${o.column.getIsSorted()==="desc"?"text-primary-600":"text-gray-400"}`})]})]})},o.id))},u.id))}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.getRowModel().rows.map(u=>r.jsx("tr",{className:`hover:bg-gray-50 ${s?"cursor-pointer":""}`,onClick:()=>s==null?void 0:s(u.original),children:u.getVisibleCells().map(o=>r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q(o.column.columnDef.cell,o.getContext())},o.id))},u.id))})]})}),n&&r.jsxs("div",{className:"card-footer flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(n.page-1)*n.pageSize+1," to"," ",Math.min(n.page*n.pageSize,n.total)," of"," ",n.total," results"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>n.onPageChange(n.page-1),disabled:n.page<=1,children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",n.page," of ",Math.ceil(n.total/n.pageSize)]}),r.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>n.onPageChange(n.page+1),disabled:n.page>=Math.ceil(n.total/n.pageSize),children:"Next"})]})]})]})}function $e(){const{data:t,isLoading:e,error:a}=$({queryKey:["skalds"],queryFn:()=>H.getSkalds(),retry:2,retryDelay:1e3});if(c.useEffect(()=>{console.log("SkaldsPage component mounted - API call status:",{isLoading:e,error:a,skalds:t})},[e,a,t]),a)return console.error("Skalds API error:",a),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Skalds"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Monitor and manage your Skald workers"})]}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(C,{className:"h-5 w-5 text-red-400"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to Load Skalds"}),r.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[r.jsx("p",{children:"Unable to fetch Skald data from the API."}),r.jsxs("p",{className:"mt-2 font-mono text-xs bg-red-100 p-2 rounded",children:["Error: ",a instanceof Error?a.message:"Unknown error"]})]}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-sm btn-primary",children:"Retry"})})]})]})})]});const n=[{key:"id",header:"Skald ID",sortable:!0},{key:"type",header:"Type",sortable:!0,render:s=>r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s==="node"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:s})},{key:"status",header:"Status",sortable:!0,render:s=>r.jsx(N,{status:s,animated:!0})},{key:"supportedTasks",header:"Supported Tasks",sortable:!1,render:s=>r.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.slice(0,3).map((i,l)=>r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800",children:i},l)),s.length>3&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800",children:["+",s.length-3," more"]})]})},{key:"currentTasks",header:"Current Tasks",sortable:!0,render:s=>r.jsx("span",{className:"text-sm text-gray-900",children:s.length})}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Skalds"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Monitor and manage your Skald workers"})]}),r.jsx(te,{data:(t==null?void 0:t.items)||[],columns:n,loading:e})]})}function p(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function j(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const ae=6048e5,He=864e5;let Ie={};function E(){return Ie}function O(t,e){var d,h,u,o;const a=E(),n=(e==null?void 0:e.weekStartsOn)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??a.weekStartsOn??((o=(u=a.locale)==null?void 0:u.options)==null?void 0:o.weekStartsOn)??0,s=p(t),i=s.getDay(),l=(i<n?7:0)+i-n;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function T(t){return O(t,{weekStartsOn:1})}function re(t){const e=p(t),a=e.getFullYear(),n=j(t,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const s=T(n),i=j(t,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const l=T(i);return e.getTime()>=s.getTime()?a+1:e.getTime()>=l.getTime()?a:a-1}function V(t){const e=p(t);return e.setHours(0,0,0,0),e}function Q(t){const e=p(t),a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return a.setUTCFullYear(e.getFullYear()),+t-+a}function qe(t,e){const a=V(t),n=V(e),s=+a-Q(a),i=+n-Q(n);return Math.round((s-i)/He)}function _e(t){const e=re(t),a=j(t,0);return a.setFullYear(e,0,4),a.setHours(0,0,0,0),T(a)}function Be(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Ve(t){if(!Be(t)&&typeof t!="number")return!1;const e=p(t);return!isNaN(Number(e))}function Qe(t){const e=p(t),a=j(t,0);return a.setFullYear(e.getFullYear(),0,1),a.setHours(0,0,0,0),a}const Xe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ue=(t,e,a)=>{let n;const s=Xe[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function L(t){return(e={})=>{const a=e.width?String(e.width):t.defaultWidth;return t.formats[a]||t.formats[t.defaultWidth]}}const Ge={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ze={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Je={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ze={date:L({formats:Ge,defaultWidth:"full"}),time:L({formats:ze,defaultWidth:"full"}),dateTime:L({formats:Je,defaultWidth:"full"})},Ke={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},et=(t,e,a,n)=>Ke[t];function M(t){return(e,a)=>{const n=a!=null&&a.context?String(a.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,d=a!=null&&a.width?String(a.width):l;s=t.formattingValues[d]||t.formattingValues[l]}else{const l=t.defaultWidth,d=a!=null&&a.width?String(a.width):t.defaultWidth;s=t.values[d]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const tt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},at={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},st={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},it={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ot=(t,e)=>{const a=Number(t),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},lt={ordinalNumber:ot,era:M({values:tt,defaultWidth:"wide"}),quarter:M({values:at,defaultWidth:"wide",argumentCallback:t=>t-1}),month:M({values:rt,defaultWidth:"wide"}),day:M({values:nt,defaultWidth:"wide"}),dayPeriod:M({values:st,defaultWidth:"wide",formattingValues:it,defaultFormattingWidth:"wide"})};function P(t){return(e,a={})=>{const n=a.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const l=i[0],d=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(d)?dt(d,x=>x.test(l)):ct(d,x=>x.test(l));let u;u=t.valueCallback?t.valueCallback(h):h,u=a.valueCallback?a.valueCallback(u):u;const o=e.slice(l.length);return{value:u,rest:o}}}function ct(t,e){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&e(t[a]))return a}function dt(t,e){for(let a=0;a<t.length;a++)if(e(t[a]))return a}function ut(t){return(e,a={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=a.valueCallback?a.valueCallback(l):l;const d=e.slice(s.length);return{value:l,rest:d}}}const mt=/^(\d+)(th|st|nd|rd)?/i,ht=/\d+/i,ft={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gt={any:[/^b/i,/^(a|c)/i]},xt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pt={any:[/1/i,/2/i,/3/i,/4/i]},yt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},jt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nt={ordinalNumber:ut({matchPattern:mt,parsePattern:ht,valueCallback:t=>parseInt(t,10)}),era:P({matchPatterns:ft,defaultMatchWidth:"wide",parsePatterns:gt,defaultParseWidth:"any"}),quarter:P({matchPatterns:xt,defaultMatchWidth:"wide",parsePatterns:pt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:P({matchPatterns:yt,defaultMatchWidth:"wide",parsePatterns:bt,defaultParseWidth:"any"}),day:P({matchPatterns:wt,defaultMatchWidth:"wide",parsePatterns:jt,defaultParseWidth:"any"}),dayPeriod:P({matchPatterns:vt,defaultMatchWidth:"any",parsePatterns:kt,defaultParseWidth:"any"})},St={code:"en-US",formatDistance:Ue,formatLong:Ze,formatRelative:et,localize:lt,match:Nt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Mt(t){const e=p(t);return qe(e,Qe(e))+1}function Pt(t){const e=p(t),a=+T(e)-+_e(e);return Math.round(a/ae)+1}function ne(t,e){var o,x,y,S;const a=p(t),n=a.getFullYear(),s=E(),i=(e==null?void 0:e.firstWeekContainsDate)??((x=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:x.firstWeekContainsDate)??s.firstWeekContainsDate??((S=(y=s.locale)==null?void 0:y.options)==null?void 0:S.firstWeekContainsDate)??1,l=j(t,0);l.setFullYear(n+1,0,i),l.setHours(0,0,0,0);const d=O(l,e),h=j(t,0);h.setFullYear(n,0,i),h.setHours(0,0,0,0);const u=O(h,e);return a.getTime()>=d.getTime()?n+1:a.getTime()>=u.getTime()?n:n-1}function Ot(t,e){var d,h,u,o;const a=E(),n=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((o=(u=a.locale)==null?void 0:u.options)==null?void 0:o.firstWeekContainsDate)??1,s=ne(t,e),i=j(t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),O(i,e)}function Dt(t,e){const a=p(t),n=+O(a,e)-+Ot(a,e);return Math.round(n/ae)+1}function m(t,e){const a=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return a+n}const b={y(t,e){const a=t.getFullYear(),n=a>0?a:1-a;return m(e==="yy"?n%100:n,e.length)},M(t,e){const a=t.getMonth();return e==="M"?String(a+1):m(a+1,2)},d(t,e){return m(t.getDate(),e.length)},a(t,e){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(t,e){return m(t.getHours()%12||12,e.length)},H(t,e){return m(t.getHours(),e.length)},m(t,e){return m(t.getMinutes(),e.length)},s(t,e){return m(t.getSeconds(),e.length)},S(t,e){const a=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,a-3));return m(s,e.length)}},k={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},X={G:function(t,e,a){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(t,e,a){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return a.ordinalNumber(s,{unit:"year"})}return b.y(t,e)},Y:function(t,e,a,n){const s=ne(t,n),i=s>0?s:1-s;if(e==="YY"){const l=i%100;return m(l,2)}return e==="Yo"?a.ordinalNumber(i,{unit:"year"}):m(i,e.length)},R:function(t,e){const a=re(t);return m(a,e.length)},u:function(t,e){const a=t.getFullYear();return m(a,e.length)},Q:function(t,e,a){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return m(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,a){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return m(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,a){const n=t.getMonth();switch(e){case"M":case"MM":return b.M(t,e);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,a){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return m(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,a,n){const s=Dt(t,n);return e==="wo"?a.ordinalNumber(s,{unit:"week"}):m(s,e.length)},I:function(t,e,a){const n=Pt(t);return e==="Io"?a.ordinalNumber(n,{unit:"week"}):m(n,e.length)},d:function(t,e,a){return e==="do"?a.ordinalNumber(t.getDate(),{unit:"date"}):b.d(t,e)},D:function(t,e,a){const n=Mt(t);return e==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):m(n,e.length)},E:function(t,e,a){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,a,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return m(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(s,{width:"short",context:"formatting"});case"eeee":default:return a.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,a,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return m(i,e.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(s,{width:"narrow",context:"standalone"});case"cccccc":return a.day(s,{width:"short",context:"standalone"});case"cccc":default:return a.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,a){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return m(s,e.length);case"io":return a.ordinalNumber(s,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,a){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,a){const n=t.getHours();let s;switch(n===12?s=k.noon:n===0?s=k.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,a){const n=t.getHours();let s;switch(n>=17?s=k.evening:n>=12?s=k.afternoon:n>=4?s=k.morning:s=k.night,e){case"B":case"BB":case"BBB":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,a){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return b.h(t,e)},H:function(t,e,a){return e==="Ho"?a.ordinalNumber(t.getHours(),{unit:"hour"}):b.H(t,e)},K:function(t,e,a){const n=t.getHours()%12;return e==="Ko"?a.ordinalNumber(n,{unit:"hour"}):m(n,e.length)},k:function(t,e,a){let n=t.getHours();return n===0&&(n=24),e==="ko"?a.ordinalNumber(n,{unit:"hour"}):m(n,e.length)},m:function(t,e,a){return e==="mo"?a.ordinalNumber(t.getMinutes(),{unit:"minute"}):b.m(t,e)},s:function(t,e,a){return e==="so"?a.ordinalNumber(t.getSeconds(),{unit:"second"}):b.s(t,e)},S:function(t,e){return b.S(t,e)},X:function(t,e,a){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return G(n);case"XXXX":case"XX":return w(n);case"XXXXX":case"XXX":default:return w(n,":")}},x:function(t,e,a){const n=t.getTimezoneOffset();switch(e){case"x":return G(n);case"xxxx":case"xx":return w(n);case"xxxxx":case"xxx":default:return w(n,":")}},O:function(t,e,a){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+U(n,":");case"OOOO":default:return"GMT"+w(n,":")}},z:function(t,e,a){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+U(n,":");case"zzzz":default:return"GMT"+w(n,":")}},t:function(t,e,a){const n=Math.trunc(t.getTime()/1e3);return m(n,e.length)},T:function(t,e,a){const n=t.getTime();return m(n,e.length)}};function U(t,e=""){const a=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?a+String(s):a+String(s)+e+m(i,2)}function G(t,e){return t%60===0?(t>0?"-":"+")+m(Math.abs(t)/60,2):w(t,e)}function w(t,e=""){const a=t>0?"-":"+",n=Math.abs(t),s=m(Math.trunc(n/60),2),i=m(n%60,2);return a+s+e+i}const z=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},se=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ct=(t,e)=>{const a=t.match(/(P+)(p+)?/)||[],n=a[1],s=a[2];if(!s)return z(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",z(n,e)).replace("{{time}}",se(s,e))},Tt={p:se,P:Ct},Et=/^D+$/,Wt=/^Y+$/,Ft=["D","DD","YY","YYYY"];function At(t){return Et.test(t)}function Rt(t){return Wt.test(t)}function Lt(t,e,a){const n=Yt(t,e,a);if(console.warn(n),Ft.includes(t))throw new RangeError(n)}function Yt(t,e,a){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $t=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ht=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,It=/^'([^]*?)'?$/,qt=/''/g,_t=/[a-zA-Z]/;function J(t,e,a){var o,x,y,S;const n=E(),s=n.locale??St,i=n.firstWeekContainsDate??((x=(o=n.locale)==null?void 0:o.options)==null?void 0:x.firstWeekContainsDate)??1,l=n.weekStartsOn??((S=(y=n.locale)==null?void 0:y.options)==null?void 0:S.weekStartsOn)??0,d=p(t);if(!Ve(d))throw new RangeError("Invalid time value");let h=e.match(Ht).map(g=>{const f=g[0];if(f==="p"||f==="P"){const W=Tt[f];return W(g,s.formatLong)}return g}).join("").match($t).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const f=g[0];if(f==="'")return{isToken:!1,value:Bt(g)};if(X[f])return{isToken:!0,value:g};if(f.match(_t))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:g}});s.localize.preprocessor&&(h=s.localize.preprocessor(d,h));const u={firstWeekContainsDate:i,weekStartsOn:l,locale:s};return h.map(g=>{if(!g.isToken)return g.value;const f=g.value;(Rt(f)||At(f))&&Lt(f,e,String(t));const W=X[f[0]];return W(d,f,s.localize,u)}).join("")}function Bt(t){const e=t.match(It);return e?e[1].replace(qt,"'"):t}function Vt(){const[t,e]=c.useState(1),[a,n]=c.useState(),s=10,{data:i,isLoading:l,error:d}=$({queryKey:["tasks",t,a],queryFn:()=>H.getTasks({page:t,pageSize:s,status:a}),retry:2,retryDelay:1e3});if(c.useEffect(()=>{console.log("TasksPage component mounted - API call status:",{isLoading:l,error:d,tasks:i,page:t,statusFilter:a})},[l,d,i,t,a]),d)return console.error("Tasks API error:",d),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tasks"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Monitor and manage task execution"})]})}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(C,{className:"h-5 w-5 text-red-400"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to Load Tasks"}),r.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[r.jsx("p",{children:"Unable to fetch task data from the API."}),r.jsxs("p",{className:"mt-2 font-mono text-xs bg-red-100 p-2 rounded",children:["Error: ",d instanceof Error?d.message:"Unknown error"]})]}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-sm btn-primary",children:"Retry"})})]})]})})]});const h=[{key:"id",header:"Task ID",sortable:!0,render:o=>r.jsx("span",{className:"font-mono text-sm",children:o})},{key:"type",header:"Type",sortable:!0,render:o=>r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:o})},{key:"status",header:"Status",sortable:!0,render:o=>r.jsx(N,{status:o,animated:!0})},{key:"executor",header:"Executor",sortable:!0,render:o=>r.jsx("span",{className:"text-sm text-gray-900",children:o||"Unassigned"})},{key:"createdAt",header:"Created",sortable:!0,render:o=>r.jsx("span",{className:"text-sm text-gray-500",children:J(new Date(o),"MMM dd, HH:mm")})},{key:"updatedAt",header:"Updated",sortable:!0,render:o=>r.jsx("span",{className:"text-sm text-gray-500",children:J(new Date(o),"MMM dd, HH:mm")})}],u=[void 0,"Created","Assigning","Running","Completed","Failed","Canceled"];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tasks"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Monitor and manage task execution"})]}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsx("select",{value:a||"",onChange:o=>n(o.target.value||void 0),className:"block w-40 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",children:u.map(o=>r.jsx("option",{value:o||"",children:o||"All Status"},o||"all"))})})]}),r.jsx(te,{data:(i==null?void 0:i.items)||[],columns:h,loading:l,pagination:{page:t,pageSize:s,total:(i==null?void 0:i.total)||0,onPageChange:e}})]})}function Qt(){return r.jsx(Fe,{children:r.jsxs(fe,{children:[r.jsx(A,{path:"/",element:r.jsx(Ye,{})}),r.jsx(A,{path:"/skalds",element:r.jsx($e,{})}),r.jsx(A,{path:"/tasks",element:r.jsx(Vt,{})})]})})}const Xt=new le({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});Y.createRoot(document.getElementById("root")).render(r.jsx(ue.StrictMode,{children:r.jsx(ce,{client:Xt,children:r.jsx(ge,{basename:"/dashboard",children:r.jsx(Qt,{})})})}));
//# sourceMappingURL=index-DuqsOqy9.js.map
